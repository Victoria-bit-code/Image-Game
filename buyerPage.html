<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="bootstrap-4.5.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="phoneVenture.css">
    <title>Buyer Page</title>
</head>
<body>
    <div class="container2 border">
        <h1>
            Techfield Business Venture
        </h1>
        <p>A place to get quality products for your consumption. <br/>
            Giving you the best is our piority.
        </p>
        <br/>
        <hr/>
        <br/>
        <!-- <table border="1">
            <tr>
                <th>Name of Phone</th>
                <th>Price in Naira</th>
                <th>Quantity</th>
                <th>Image of the Good</th>
                <th>Quantity to Purchase</th>
                <th>Amount to Pay</th>
            </tr>
        </table> -->
        <div class="container text-center border font-weight-bold h5" id="result">
            
        </div>
        <!-- <div class="container text-center">
            <div class="row">
                <div class="col-md-2"><input type="text" class="form-control" id="res" disabled></div>
                <div class="col-md-2"><input type="text" class="form-control" id="res2" disabled></div>
                <div class="col-md-2"><input type="text" class="form-control" id="res3" disabled></div>
                <div class="col-md-2"><input type="file" id="res4"></div>
                <div class="col-md-2"><input type="text" class="form-control" id="res5" onkeyup="amt()"></div>
                <div class="col-md-2"><input type="text" class="form-control" id="res6"></div>
            </div>
        </div> -->
    </div>
</body>
<script>

    let phoneArr = JSON.parse(localStorage.getItem("phoneList"));
    console.log(phoneArr);
    var holdtable = `
                        <table>
                            <tr class="bg-info">
                                <th>Name of Phone</th>
                                <th>Price in Naira</th>
                                <th>Quantity in Stock</th>
                                <th>Image of the Goods</th>
                                <th>Quantity to Purchase</th>
                                <th>Amount in Naira</th>
                            </tr>
                        `
    var holdelement = "";
   
    phoneArr.map((phone, i) => {
        holdelement += `
        <tr>
            <td>${phone.phoneName}</td>
            <td id = "price${i}">${phone.price}</td>
            <td id = "qty${i}">${phone.quantity}</td>
            <td id = >${phone.image}</td>
            <td ><input type="text" class="form-control" onchange = 'amt(event, ${i})'></td>
            <td id = "tab${i}"></td>
        </tr>
        <tr> 
            <td id = "tot${i}"></td>
            </tr>`
    });
    holdtable+=holdelement;
    holdtable+=`</table>`;
    result.innerHTML = holdtable;
 
    const amt = (e, i) => {
      if (document.getElementById('qty' + i).innerHTML = e.target.value) {
        let myRes = phoneArr[i].price * e.target.value;
        document.getElementById('tab' + i).innerHTML = myRes;
        document.getElementById('qty' + i).innerHTML = document.getElementById('qty' + i).innerHTML - e.target.value;
        }else if (document.getElementById('qty' + i).innerHTML < e.target.value) {
            e.target.value = 'Currently Out Of Stock';
        }
    }
    
    // let a = JSON.parse(localStorage.arr);
    // res.value = a[0];
    // res2.value = a[1];
    // res3.value = a[2]; 
    // // console.log(a[1] * a[2]);
    // const amt = () => {
    //     if (res5.value > res2.value) {
    //         res6.value = 'Currently out of stock';
    //     }else{
    //         res6.value = res2.value * res5.value; 
    //     }
    // } 
</script>  
</html>